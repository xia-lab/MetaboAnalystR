<!DOCTYPE html>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui">

    <h:panelGrid>    

            <h:panelGrid cellpadding="4" style="width: 700px; flex: 1; font-size: 13px;" 
                         class="surface-card shadow-1 p-4 text-800">
                <p:selectOneRadio id="rowRadio" value="#{normBean.rowNormOpt}" layout="custom">
                    <f:selectItem itemValue="NULL" itemLabel="None"/>
                    <f:selectItem itemValue="SpecNorm" itemLabel="Sample-specific normalization"/>
                    <f:selectItem itemValue="SumNorm" itemLabel="Normalization by sum (scaled to 1000)"/>
                    <f:selectItem itemValue="MedianNorm" itemLabel="Normalization by median"/>
                    <f:selectItem itemValue="SamplePQN" itemLabel="Specify a reference sample"/>
                    <f:selectItem itemValue="GroupPQN" itemLabel="Create a pooled average sample from group"/>
                    <f:selectItem itemValue="CompNorm" itemLabel="Normalization by reference feature"/>
                    <f:selectItem itemValue="QuantileNorm" itemLabel="Quantile normalization"/>
                </p:selectOneRadio>
                <p:selectOneRadio id="transRadio" value="#{normBean.transNormOpt}" layout="custom">  
                    <f:selectItem itemValue="NULL" itemLabel="None"/>
                    <f:selectItem itemValue="LogNorm" itemLabel="Log(10) transformation"/>
                    <f:selectItem itemValue="SrNorm" itemLabel="Square root transformation"/>
                    <f:selectItem itemValue="CrNorm" itemLabel="Cube root transformation"/>
                </p:selectOneRadio>
                <p:selectOneRadio id="scaleRadio" value="#{normBean.scaleNormOpt}" layout="custom">  
                    <f:selectItem itemValue="NULL" itemLabel="None"/>
                    <f:selectItem itemValue="MeanCenter" itemLabel="Mean centering"/>
                    <f:selectItem itemValue="AutoNorm" itemLabel="Auto scaling"/>
                    <f:selectItem itemValue="ParetoNorm" itemLabel="Pareto scaling"/>
                    <f:selectItem itemValue="RangeNorm" itemLabel="Range scaling"/>
                </p:selectOneRadio>
                <h:outputText rendered="#{sessionBean1.roc1Col eq 'false'}" value="Sample normalization" style="font-size:13px; font-weight:bold"/>
                <h:panelGrid columns="3" style="padding:2px 12px 10px 10px"
                             rendered="#{sessionBean1.roc1Col eq 'false'}">
                    <p:radioButton for="rowRadio" itemIndex="0"/>
                    <p:outputLabel style="font-size:12px; font-weight: bold" value="None"/>
                    <p:spacer/>

                    <p:radioButton for="rowRadio" itemIndex="1"/>
                    <h:panelGroup layout="block" style="width: 360px">
                        <p:outputLabel style="font-size:12px; font-weight: bold" value="Sample-specific normalization"/>
                        <h:outputLabel value=" (i.e. weight, volume)"/>
                    </h:panelGroup>
                    <p:commandLink value="Specify" onclick="PF('smplNormDialog').show()"/>

                    <p:radioButton for="rowRadio" itemIndex="2"/>
                    <p:outputLabel style="font-size:12px; font-weight: bold" value="Normalization by sum"/>
                    <p:spacer/>

                    <p:radioButton for="rowRadio" itemIndex="3"/>
                    <p:outputLabel style="font-size:12px; font-weight: bold" value="Normalization by median"/>
                    <p:spacer/>   

                    <p:radioButton for="rowRadio" itemIndex="4"/>
                    <p:outputLabel style="font-size:12px; font-weight: bold" value="Normalization by a reference sample (PQN)"/>  
                    <p:commandLink value="Specify" onclick="PF('refSmplDialog').show()"/>

                    <p:radioButton for="rowRadio" itemIndex="5"/>
                    <p:outputLabel style="font-size:12px; font-weight: bold" value="Normalization by a pooled sample (group PQN)"/>  
                    <p:commandLink value="Specify" onclick="PF('refGrpDialog').show()"/>

                    <p:radioButton for="rowRadio" itemIndex="6"/>
                    <p:outputLabel style="font-size:12px; font-weight: bold" value="Normalization by reference feature"/>  
                    <p:commandLink value="Specify" onclick="PF('refVarDialog').show()"/>

                    <p:radioButton for="rowRadio" itemIndex="7"/>
                    <h:panelGroup layout="block">
                        <p:outputLabel style="font-size:12px; font-weight: bold" value="Quantile normalization"/>
                        <h:outputLabel value="(only suggested for > 1000 features)"/>
                    </h:panelGroup>
                    <p:spacer/>   

                </h:panelGrid>
                <!--
                <h:panelGrid style="width:100%; border-bottom: darkgray dashed thin; border-top: darkgray dashed thin" 
                             rendered="#{sessionBean1.analType eq 'roc'}">
                    <h:panelGroup>
                        <p:selectBooleanCheckbox value ="#{normBean.includeRatio}" 
                                                 disabled="#{not (sessionBean1.dataType eq 'conc' and sessionBean1.roc1Col eq 'false')}"
                                                 style="line-height: 18px"/>
                        <h:outputLabel style="font-weight: bold" value=" Compute and include metabolite ratios:"/>
                        <p:selectOneMenu styleClass="menu" panelStyleClass="panel" value="#{normBean.ratioNumOpt}">
                            <f:selectItem itemLabel="Top 20" itemValue="20"/> 
                            <f:selectItem itemLabel="Top 50" itemValue="50"/> 
                            <f:selectItem itemLabel="Top 100" itemValue="100"/> 
                        </p:selectOneMenu>
                        <h:outputLabel style="font-weight: bold" value=" from top 1000 features based on" 
                                       rendered="#{rocAnalBean.featureRatioOptOut}"/>
                        <p:selectOneMenu styleClass="menu" panelStyleClass="panel" value="#{normBean.ratioFilterOpt}" 
                                         rendered="#{rocAnalBean.featureRatioOptOut}">
                            <f:selectItem itemLabel="Sum" itemValue="sum"/> 
                            <f:selectItem itemLabel="Variance" itemValue="var"/>
                        </p:selectOneMenu>
                    </h:panelGroup>

                    <p>
                        Ratios between two metabolite concentrations may carry more information than the two corresponding metabolite 
                        concentrations alone. MetaboAnalyst will compute ratios of all possible metabolite pairs and then 
                        choose top ranked ratios (based on p values) to be included in the data for further biomarker analysis.
                        <u>Note, there is a potential overfitting issue associated with the procedure. The main purpose here is 
                            to improve the chance of biomarker discovery</u>. You need to validate the performance in independent studies.
                        Log normalization will be performed during the process. You can only perform Data scaling in the next step.
                        Please note that if your dataset contains more than 1000 compounds/features, MetaboAnalyst would only include the top
                        1000 features based on the sum or variance of abundance of all compounds/features.
                    </p>
                </h:panelGrid>
                -->
                <h:outputText value="Data transformation" style="font-size:13px; font-weight:bold"/>
                <h:panelGrid columns="2" style="padding:2px 12px 10px 10px">
                    <p:radioButton for="transRadio" itemIndex="0"/>
                    <p:outputLabel style="font-size:12px; font-weight: bold" value="None"/>

                    <p:radioButton for="transRadio" itemIndex="1"/>
                    <h:panelGroup layout="block">
                        <p:outputLabel style="font-size:12px; font-weight: bold" value="Log transformation"/>
                        <h:outputLabel value=" (base 10)"/>
                    </h:panelGroup>
                    <p:radioButton for="transRadio" itemIndex="2"/>
                    <p:outputLabel style="font-size:12px; font-weight: bold" value="Square root transformation"/>

                    <p:radioButton for="transRadio" itemIndex="3"/>
                    <p:outputLabel style="font-size:12px; font-weight: bold" value="Cube root transformation"/>

                </h:panelGrid>
                <h:outputText value="Data scaling" style="font-size:13px; font-weight:bold"/>
                <h:panelGrid columns="2" style="padding:2px 12px 10px 10px">
                    <p:radioButton for="scaleRadio" itemIndex="0"/>
                    <p:outputLabel style="font-size:12px; font-weight: bold" value="None"/>

                    <p:radioButton for="scaleRadio" itemIndex="1"/>
                    <p:outputLabel style="font-size:12px; font-weight: bold" value="Mean centering"/>

                    <p:radioButton for="scaleRadio" itemIndex="2"/>
                    <p:outputLabel style="font-size:12px; font-weight: bold" value="Auto scaling"/>

                    <p:radioButton for="scaleRadio" itemIndex="3"/>
                    <p:outputLabel style="font-size:12px; font-weight: bold" value="Pareto scaling"/>

                    <p:radioButton for="scaleRadio" itemIndex="4"/>
                    <p:outputLabel style="font-size:12px; font-weight: bold" value="Range scaling"/>

                </h:panelGrid>
            </h:panelGrid>

    </h:panelGrid> 
</ui:composition>
