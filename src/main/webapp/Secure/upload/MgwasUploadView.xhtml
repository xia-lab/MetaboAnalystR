<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                template="#{sessionBean1.templatePath}">
    <ui:define name="metaInfo">
        <f:event type="preRenderView" listener="#{sessionBean1.initNaviTree('mgwas')}"/> 
        <f:event type="preRenderView" listener="#{sessionBean1.addNaviTrack('Upload', '/Secure/upload/MgwasUploadView.xhtml')}"/>
    </ui:define>
    <ui:define name="footerout"/>
    <ui:define name="content">
        <style>
            .ui-picklist .ui-picklist-list{
                line-height: 18px;
                height:320px;
                width: 280px
            }
            .ui-picklist-button-add {
                visibility: hidden !important;
            }
            .ui-picklist-button-add-all {
                visibility: hidden !important;
            }
        </style>
        <h:panelGrid styleClass="my-content-panel">
            <h2>
                Please specify metabolites (exposure) and outcome of interest
            </h2>
            <p>
                Causal analysis is based on two-sample Mendelian randomization (2SMR) which leverages genetic variants such as single-nucleotide polymorphisms (SNPs) 
                as instrumental variables (IV) to estimate exposure-outcome associations. The main steps as described below:
                <ol>
                    <li>
                        Identify candidate SNPs that are associated with an exposure (metabolite) of interest and an outcome of interest
                    </li>
                    <li>
                        Perform SNP filtering and harmonization to make sure that that are valid IVs (e.g. <a href="https://pmc.ncbi.nlm.nih.gov/articles/PMC9177700/" target="_blank">relevance, independence and exclusion criteria</a>).
                    </li>
                    <li>
                        Conduct MR tests, explore results and literature evidence
                    </li>
                </ol>
            </p>

            <h3 style="margin-top:20px">
                1. Select a metabolite (exposure) of interest:
            </h3>
            <p>
                Due to its complex and computing intensive nature, MR analysis is performed with <u>one metabolite/exposure at a time</u>. 
                To increase the chance of identification of the genetically influenced metabolites, metabolites that have passed the 
                threshold in any of the <a href="https://www.mgwas.ca/mGWAS/upload/MGBrowseView.xhtml"  target="_blank">mGWAS studies</a> will be listed below. 
                You will be able to examine the detailed SNP-metabolite associations (studies, p-values, etc) in the next page.. 
            </p>

            <h:form id="form1">
                <p:selectOneListbox id="metaboliteSelect"
                                    value="#{mgwasLoadBean.myCmpd}"
                                    filter="true"
                                    filterMatchMode="contains" 
                                    style="width:540px; margin-left: 20px"
                                    scrollHeight="360">

                    <f:selectItems value="#{mgwasLoadBean.metCompleteList}" />
                </p:selectOneListbox> 

                <h3 style="margin-top:30px">
                    2. Specify an outcome of interest:
                </h3>
                <p>
                    Enter a key word to see available options from the public repository.
                </p>

                <p:autoComplete id="acSimple3" 
                                size="110"
                                forceSelection="true"
                                value="#{mgwasLoadBean.selectedDisease}" 
                                minQueryLength="4" 
                                maxResults="12" 
                                style="margin-left: 20px"
                                completeMethod="#{mgwasLoadBean.completeTextDis}" 
                                scrollHeight="250"/>


                <h:panelGrid style="width: 800px; text-align: center; padding-top: 20px">
                    <p:commandButton value="Proceed" 
                                     onclick="PF('statusDialog').show()" 
                                     oncomplete="PF('statusDialog').hide()"
                                     ajax="false" 
                                     action="#{mgwasLoadBean.handleMgwasSelection()}"/>  
                </h:panelGrid>
            </h:form>
        </h:panelGrid>     
    </ui:define>
</ui:composition>
