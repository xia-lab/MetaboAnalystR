<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui">

    <style type="text/css">
        .indivcheckbox .ui-chkbox-icon {
            top: 0% !important;
        }
        .mydt.ui-datatable thead th{
            background:inherit !important;
            border:none !important;
            color:inherit !important;
        }
        .mydt.ui-datatable table thead {
            display: none;
        }

    </style>
    <h:form id="dataListForm2">
        <p:commandButton id="mydatabtn" value="" 
                         icon="pi pi-upload"
                         styleClass="ui-button-raised rounded-button ui-button-outlined my-float-btn"/>
        <p:overlayPanel for="mydatabtn" dismissable="false" showCloseIcon="true" style="width:300px">
            <p:dataTable rendered="#{sessionBean1.analType ne 'metapaths' and sessionBean1.analType ne 'metadata' }" id="listTblMeta" style="margin-top: 20px; padding: 10px; width:100%;" 
                         class="surface-card shadow-1 p-0 text-800"
                         var="data" rowKey="#{data.name}" value="#{procBean.metaDataSet}"> 
                <p:column style="width:75%;" headerText="Metadata Summary" > 
                 <!--   <h:outputLabel value="#{data.name}" style="font-weight:bold"/> <br/>-->

                    <h:outputLabel value="Factors #: #{data.groupInfo}"/>  <br/>
                    <h:outputLabel value="Sample: #{data.smplNum}"/> <br/>
                    <h:outputLabel value="Primary: #{data.primaryMeta}"/><br/>

                </p:column> 
                <p:column style="width:25%;" headerText="Edit Groups" > 

                    <p:commandLink  rendered="#{sessionBean1.analType ne 'mf'}"   oncomplete="PF('smplPanelDialog').show()"         
                                    update="dataListForm">
                        <span style="color: tomato;">
                            <i class="pi pi-pencil"  style="color: tomato !important; font-size: 18px"/>
                        </span>
                    </p:commandLink>
                    <p:commandLink  rendered="#{sessionBean1.analType eq 'mf'}"   oncomplete="PF('multiMetaDialog').show()"         
                                    update="dataListForm">
                        <span style="color: tomato;">
                            <i class="pi pi-pencil"  style="color: tomato !important; font-size: 18px"/>
                        </span>
                    </p:commandLink>

                </p:column> 
            </p:dataTable>
            <p:dataTable rendered="#{sessionBean1.uploadType ne 'list'}"   id="listTbl" style="margin-top: 20px; padding: 10px; width: 100%;" 
                         class="surface-card shadow-1 p-0 text-700"
                         var="data" rowKey="#{data.name}" value="#{procBean.dataSets}"> 


                <p:column rendered="#{sessionBean1.analType eq 'metapaths' or sessionBean1.analType eq 'metadata'}" style="width:3%;" headerText="Data name">
                    <h:outputText value="#{data.name}" />
                </p:column>

                <p:column rendered="#{sessionBean1.analType eq 'metapaths' or sessionBean1.analType eq 'metadata'}" style="width:50%;"  headerText="Summary">
                    <h:outputText value="Features: #{data.geneNum}" /> <br/>
                    <h:outputText value="Sample: #{data.smplNum}" /> <br/>
                    <h:outputText value="Groups: #{data.groupInfo}" /> <br/>
                </p:column>

                <p:column rendered="#{sessionBean1.analType ne 'metapaths' and sessionBean1.analType ne 'metadata'}"  style="width:75%;" headerText="Feature table"> 
                    <h:outputLabel value="Features: #{data.geneNum}"/>  <br/>
                    <h:outputLabel value="Samples: #{data.smplNum}"/> <br/>
                </p:column> 

                <p:column style="width:20%;" headerText="View Data" > 
                    <p:commandLink   
                        action="#{procBean.prepViewData(data.dataName)}"
                        oncomplete="PF('dataPanelDialog').show()"   >
                        <span style="color: tomato;">
                            <i class="pi pi-external-link"  style="color: tomato !important; font-size: 18px"/>
                        </span>
                    </p:commandLink>

                </p:column> 
            </p:dataTable>
            <p:dataTable rendered="#{sessionBean1.uploadType eq 'list'}" id="listMapTbl" style="margin-top: 20px; padding: 10px; width: 100%;" 
                         class="surface-card shadow-1 p-0 text-700"
                         var="data"   value=""> 

                <p:column style="width:75%;" headerText="Feature list"> 
                    <h:outputLabel value="Features: #{procBean.row_count}"/>  <br/> 
                </p:column> 

                <p:column style="width:25%;" headerText="View Data" > 
                    <p:commandLink    oncomplete="PF('listMapDialog').show()" 
                                      >
                        <span style="color: tomato;">
                            <i class="pi pi-external-link"  style="color: tomato !important; font-size: 18px"/>
                        </span>
                    </p:commandLink>
                </p:column> 
            </p:dataTable>

            <h:panelGrid  style="width:100%; padding: 10px">


            </h:panelGrid>

        </p:overlayPanel>

    </h:form> 

    <p:dialog widgetVar="dataPanelDialog" header="Data View" dynamic="true" modal="true" appendTo="@(body)" height="460"
              width="800px" hideEffect="explode" resizable="true">
        <p>
            Your uploaded (raw) data are shown below for manual inspection. It represents the computer's view of your data. 
            The first column is the row number. For large data, a max of 10 columns and 100 rows will be displayed. 
        </p>
        <iframe id="iframeId" frameborder="0" width="100%" height="600" src="#{facesContext.externalContext.requestContextPath}/Secure/viewer/_data_viewer.html"></iframe>

    </p:dialog>
</ui:composition>

