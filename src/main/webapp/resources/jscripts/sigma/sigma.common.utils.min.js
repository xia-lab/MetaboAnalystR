sigma.utils.pkg("sigma.canvas.nodes");sigma.canvas.nodes.def=function(r,e,d){var a=d("prefix")||"";e.fillStyle=r.color||d("defaultNodeColor");e.beginPath();e.arc(r[a+"x"],r[a+"y"],r[a+"size"],0,2*Math.PI,!0);e.closePath();e.fill();r.borderColor&&(e.lineWidth=2,e.strokeStyle=r.borderColor,e.stroke())};
(function(r){if("undefined"===typeof sigma)throw"sigma is not declared";if("undefined"===typeof conrad)throw"conrad is not declared";sigma.utils.pkg("sigma.renderers");sigma.renderers.svg=function(e,d,a,c){if("object"!==typeof c)throw"sigma.renderers.svg: Wrong arguments.";if(!(c.container instanceof HTMLElement))throw"Container not found.";var b=this;sigma.classes.dispatcher.extend(this);this.graph=e;this.camera=d;this.domElements={graph:null,groups:{},nodes:{},edges:{},labels:{},hovers:{}};this.measurementCanvas=
null;this.options=c;this.container=this.options.container;this.settings="object"===typeof c.settings&&c.settings?a.embedObjects(c.settings):a;this.settings("freeStyle",!!this.options.freeStyle);this.settings("xmlns","http://www.w3.org/2000/svg");this.nodesOnScreen=[];this.edgesOnScreen=[];this.options.prefix="renderer"+sigma.utils.id()+":";this.initDOM("svg");this.captors=[];a=this.options.captors||[sigma.captors.mouse,sigma.captors.touch];e=0;for(d=a.length;e<d;e++)c="function"===typeof a[e]?a[e]:
sigma.captors[a[e]],this.captors.push(new c(this.domElements.graph,this.camera,this.settings));window.addEventListener("resize",function(){b.resize()});this.resize(!1)};sigma.renderers.svg.prototype.render=function(e){e=e||{};var d;var a={};var c=this.graph;var b=this.graph.nodes,f=this.settings(e,"drawEdges");var g=this.settings(e,"drawNodes");this.settings(e,"drawLabels");var l=this.settings.embedObjects(e,{prefix:this.options.prefix,forceLabels:this.options.forceLabels});this.settings(e,"hideEdgesOnMove")&&
(this.camera.isAnimated||this.camera.isMoving)&&(f=!1);this.camera.applyView(r,this.options.prefix,{width:this.width,height:this.height});this.hideDOMElements(this.domElements.nodes);this.hideDOMElements(this.domElements.edges);this.hideDOMElements(this.domElements.labels);this.edgesOnScreen=[];e=this.nodesOnScreen=this.camera.quadtree.area(this.camera.getRectangle(this.width,this.height));var h=0;for(d=e.length;h<d;h++)a[e[h].id]=e[h];e=c.edges();h=0;for(d=e.length;h<d;h++)c=e[h],!a[c.source]&&!a[c.target]||
c.hidden||b(c.source).hidden||b(c.target).hidden||this.edgesOnScreen.push(c);a=sigma.svg.nodes;var k=sigma.svg.labels;if(g)for(e=this.nodesOnScreen,h=0,d=e.length;h<d;h++)e[h].hidden||this.domElements.nodes[e[h].id]||(c=(a[e[h].type]||a.def).create(e[h],l),this.domElements.nodes[e[h].id]=c,this.domElements.groups.nodes.appendChild(c),c=(k[e[h].type]||k.def).create(e[h],l),this.domElements.labels[e[h].id]=c,this.domElements.groups.labels.appendChild(c));if(g)for(e=this.nodesOnScreen,h=0,d=e.length;h<
d;h++)e[h].hidden||((a[e[h].type]||a.def).update(e[h],this.domElements.nodes[e[h].id],l),(k[e[h].type]||k.def).update(e[h],this.domElements.labels[e[h].id],l));a=sigma.svg.edges;if(f)for(e=this.edgesOnScreen,h=0,d=e.length;h<d;h++)this.domElements.edges[e[h].id]||(g=b(e[h].source),c=b(e[h].target),c=(a[e[h].type]||a.def).create(e[h],g,c,l),this.domElements.edges[e[h].id]=c,this.domElements.groups.edges.appendChild(c));if(f)for(e=this.edgesOnScreen,h=0,d=e.length;h<d;h++)g=b(e[h].source),c=b(e[h].target),
(a[e[h].type]||a.def).update(e[h],this.domElements.edges[e[h].id],g,c,l);this.dispatchEvent("render");return this};sigma.renderers.svg.prototype.initDOM=function(e){var d=document.createElementNS(this.settings("xmlns"),e);e=this.settings("classPrefix");var a;d.style.position="absolute";d.setAttribute("class",e+"-svg");d.setAttribute("xmlns",this.settings("xmlns"));d.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink");d.setAttribute("version","1.1");var c=document.createElement("canvas");c.setAttribute("class",
e+"-measurement-canvas");this.domElements.graph=this.container.appendChild(d);var b=["edges","nodes","labels","hovers"];var f=0;for(a=b.length;f<a;f++)d=document.createElementNS(this.settings("xmlns"),"g"),d.setAttributeNS(null,"id",e+"-group-"+b[f]),d.setAttributeNS(null,"class",e+"-group"),this.domElements.groups[b[f]]=this.domElements.graph.appendChild(d);this.container.appendChild(c);this.measurementCanvas=c.getContext("2d")};sigma.renderers.svg.prototype.hideDOMElements=function(e){var d;for(d in e){var a=
e[d];sigma.svg.utils.hide(a)}return this};sigma.renderers.svg.prototype.bindHovers=function(e){var d=sigma.svg.hovers,a=this,c;this.bind("overNode",function(b){b=b.data.node;var f=a.settings.embedObjects({prefix:e});f("enableHovering")&&(f=(d[b.type]||d.def).create(b,a.domElements.nodes[b.id],a.measurementCanvas,f),a.domElements.hovers[b.id]=f,a.domElements.groups.hovers.appendChild(f),c=b)});this.bind("outNode",function(b){b=b.data.node;a.settings.embedObjects({prefix:e})("enableHovering")&&(a.domElements.groups.hovers.removeChild(a.domElements.hovers[b.id]),
c=null,delete a.domElements.hovers[b.id],a.domElements.groups.nodes.appendChild(a.domElements.nodes[b.id]))});this.bind("render",function(){if(c){var b=a.settings.embedObjects({prefix:e});a.domElements.groups.hovers.removeChild(a.domElements.hovers[c.id]);delete a.domElements.hovers[c.id];b=(d[c.type]||d.def).create(c,a.domElements.nodes[c.id],a.measurementCanvas,b);a.domElements.hovers[c.id]=b;a.domElements.groups.hovers.appendChild(b)}})};sigma.renderers.svg.prototype.resize=function(e,d){var a=
this.width,c=this.height;e!==r&&d!==r?(this.width=e,this.height=d):(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,e=this.width,d=this.height);if(a!==this.width||c!==this.height)this.domElements.graph.style.width=e+"px",this.domElements.graph.style.height=d+"px","svg"===this.domElements.graph.tagName.toLowerCase()&&(this.domElements.graph.setAttribute("width",1*e),this.domElements.graph.setAttribute("height",1*d));return this};sigma.utils.pkg("sigma.svg.nodes");sigma.utils.pkg("sigma.svg.edges");
sigma.utils.pkg("sigma.svg.labels")}).call(this);
(function(r){if("undefined"===typeof sigma)throw"sigma.renderers.snapshot: sigma not in scope.";var e=this.URL||this.webkitURL||this;sigma.prototype.toSVG=function(d){d=d||{};var a=this.settings("classPrefix"),c=d.size||d.width||"1000",b=d.size||d.height||"1000",f=d.background,g=document.createElement("div");g.setAttribute("width",c);g.setAttribute("height",b);g.setAttribute("style","position:absolute; top: 0px; left:0px; width: "+c+"px; height: "+b+"px;");var l=this.addCamera(),h=this.addRenderer({camera:l,
container:g,type:"svg",forceLabels:!!d.labels});h.resize(c,b);this.refresh();this.killRenderer(h);this.killCamera(l);g=g.querySelector("svg");g.removeAttribute("style");g.setAttribute("width",c+"px");g.setAttribute("height",b+"px");g.setAttribute("x","0px");g.setAttribute("y","0px");g.setAttribute("style","overflow:hidden; background-color:"+f);d.labels||(c=g.querySelector('[id="'+a+'-group-labels"]'),g.removeChild(c));c=g.querySelector('[id="'+a+'-group-hovers"]');g.removeChild(c);d.classes=!1!==
d.classes;if(!d.data||d.classes){c=d;var k={};b={};f=0;h="";var n;if(c.classes){var m=document.createElementNS("http://www.w3.org/2000/svg","style");g.insertBefore(m,g.firstChild)}var p=g.querySelectorAll('[id="'+a+'-group-nodes"] > [class="'+a+'-node"]');var q=0;var t=p.length;for(n=!0;q<t;q++)l=p[q].getAttribute("fill"),c.data||p[q].removeAttribute("data-node-id"),c.classes&&(l in k||(k[l]=n?a+"-node":"c-"+f++,h+="."+k[l]+"{fill: "+l+"}"),k[l]!==a+"-node"&&p[q].setAttribute("class",p[q].getAttribute("class")+
" "+k[l]),p[q].removeAttribute("fill")),n=!1;k=g.querySelectorAll('[id="'+a+'-group-edges"] > [class="'+a+'-edge"]');q=0;t=k.length;for(n=!0;q<t;q++)l=k[q].getAttribute("stroke"),c.data||k[q].removeAttribute("data-edge-id"),c.classes&&(l in b||(b[l]=n?a+"-edge":"c-"+f++,h+="."+b[l]+"{stroke: "+l+"}"),b[l]!==a+"-edge"&&k[q].setAttribute("class",k[q].getAttribute("class")+" "+b[l]),k[q].removeAttribute("stroke")),n=!1;c.classes&&m.appendChild(document.createTextNode(h))}a='<?xml version="1.0" encoding="utf-8"?>\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n'+
g.outerHTML;d.download&&(g=d.filename||"graph.svg",d=new Blob([a],{type:"image/svg+xml;charset=utf-8"}),m={},m.anchor=document.createElement("a"),m.anchor.setAttribute("href",e.createObjectURL(d)),m.anchor.setAttribute("download",g),g=document.createEvent("MouseEvent"),g.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),e.revokeObjectURL(d),m.anchor.dispatchEvent(g),delete m.anchor);return a}}).call(this);
(function(){sigma.utils.pkg("sigma.svg.edges");sigma.svg.edges.def={create:function(r,e,d,a){var c=r.color;a("prefix");var b=a("edgeColor"),f=a("defaultNodeColor"),g=a("defaultEdgeColor");if(!c)switch(b){case "source":c=e.color||f;break;case "target":c=d.color||f;break;default:c=g}e=document.createElementNS(a("xmlns"),"line");e.setAttributeNS(null,"data-edge-id",r.id);e.setAttributeNS(null,"class",a("classPrefix")+"-edge");e.setAttributeNS(null,"stroke",c);return e},update:function(r,e,d,a,c){c=c("prefix")||
"";e.setAttributeNS(null,"stroke-width",r[c+"size"]||1);e.setAttributeNS(null,"x1",d[c+"x"]);e.setAttributeNS(null,"y1",d[c+"y"]);e.setAttributeNS(null,"x2",a[c+"x"]);e.setAttributeNS(null,"y2",a[c+"y"]);e.style.display="";return this}}})();
(function(){sigma.utils.pkg("sigma.svg.edges");sigma.svg.edges.curve={create:function(r,e,d,a){var c=r.color;a("prefix");var b=a("edgeColor"),f=a("defaultNodeColor"),g=a("defaultEdgeColor");if(!c)switch(b){case "source":c=e.color||f;break;case "target":c=d.color||f;break;default:c=g}e=document.createElementNS(a("xmlns"),"path");e.setAttributeNS(null,"data-edge-id",r.id);e.setAttributeNS(null,"class",a("classPrefix")+"-edge");e.setAttributeNS(null,"stroke",c);return e},update:function(r,e,d,a,c){c=
c("prefix")||"";e.setAttributeNS(null,"stroke-width",r[c+"size"]||1);e.setAttributeNS(null,"d","M"+d[c+"x"]+","+d[c+"y"]+" Q"+((d[c+"x"]+a[c+"x"])/2+(a[c+"y"]-d[c+"y"])/4)+","+((d[c+"y"]+a[c+"y"])/2+(d[c+"x"]-a[c+"x"])/4)+" "+a[c+"x"]+","+a[c+"y"]);e.setAttributeNS(null,"fill","none");e.style.display="";return this}}})();
(function(r){if("undefined"===typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.svg.labels");sigma.svg.labels.def={create:function(e,d){var a=d("prefix")||"",c=e[a+"size"];a=document.createElementNS(d("xmlns"),"text");c="fixed"===d("labelSize")?d("defaultLabelSize"):d("labelSizeRatio")*c;var b="node"===d("labelColor")?e.color||d("defaultNodeColor"):d("defaultLabelColor");a.setAttributeNS(null,"data-label-target",e.id);a.setAttributeNS(null,"class",d("classPrefix")+"-label");a.setAttributeNS(null,
"font-size",c);a.setAttributeNS(null,"font-family",d("font"));a.setAttributeNS(null,"fill",b);a.innerHTML=e.label;a.textContent=e.label;return a},update:function(e,d,a){var c=a("prefix")||"",b=e[c+"size"],f="fixed"===a("labelSize")?a("defaultLabelSize"):a("labelSizeRatio")*b;if(!(!a("forceLabels")&&b<a("labelThreshold")||"string"!==typeof e.label))return d.setAttributeNS(null,"x",Math.round(e[c+"x"]+b+3)),d.setAttributeNS(null,"y",Math.round(e[c+"y"]+f/3)),d.style.display="",this}}}).call(this);
(function(r){var e=[];r=function(b,f,g){e.push({name:b,drawShape:f,drawBorder:g})};var d=function(b){return function(f,g,l,h,k,n){n.fillStyle=k;n.beginPath();b(f,g,l,h,n);n.closePath();n.fill()}},a=function(b){return function(f,g,l,h,k,n){n.strokeStyle=k;n.lineWidth=h/5;n.beginPath();b(f,g,l,h,n);n.closePath();n.stroke()}},c=function(b,f,g,l,h){b=45*Math.PI/180;h.moveTo(f+l*Math.sin(b),g-l*Math.cos(b));for(var k=1;4>k;k++)h.lineTo(f+Math.sin(b+2*Math.PI*k/4)*l,g-Math.cos(b+2*Math.PI*k/4)*l)};r("square",
d(c),a(c));c=function(b,f,g,l,h){h.arc(f,g,l,0,2*Math.PI,!0)};r("circle",d(c),a(c));c=function(b,f,g,l,h){h.moveTo(f-l,g);h.lineTo(f,g-l);h.lineTo(f+l,g);h.lineTo(f,g+l)};r("diamond",d(c),a(c));c=function(b,f,g,l,h){b=b.cross&&b.cross.lineWeight||5;h.moveTo(f-l,g-b);h.lineTo(f-l,g+b);h.lineTo(f-b,g+b);h.lineTo(f-b,g+l);h.lineTo(f+b,g+l);h.lineTo(f+b,g+b);h.lineTo(f+l,g+b);h.lineTo(f+l,g-b);h.lineTo(f+b,g-b);h.lineTo(f+b,g-l);h.lineTo(f-b,g-l);h.lineTo(f-b,g-b)};r("cross",d(c),a(c));c=function(b,f,
g,l,h){var k=b.equilateral&&b.equilateral.numPoints||5;b=(b.equilateral&&b.equilateral.rotate||0)*Math.PI/180;h.moveTo(f+l*Math.sin(b),g-l*Math.cos(b));for(var n=1;n<k;n++)h.lineTo(f+Math.sin(b+2*Math.PI*n/k)*l,g-Math.cos(b+2*Math.PI*n/k)*l)};r("equilateral",d(c),a(c));c=function(b,f,g,l,h){var k=b.star&&b.star.numPoints||5;b=l*(b.star&&b.star.innerRatio||.5);var n=Math.PI/k;h.moveTo(f,g-l);for(var m=0;m<k;m++)h.lineTo(f+Math.sin(n+2*Math.PI*m/k)*b,g-Math.cos(n+2*Math.PI*m/k)*b),h.lineTo(f+Math.sin(2*
Math.PI*(m+1)/k)*l,g-Math.cos(2*Math.PI*(m+1)/k)*l)};r("star",d(c),a(c));r("pacman",function(b,f,g,l,h,k){k.fillStyle="yellow";k.beginPath();k.arc(f,g,l,1.25*Math.PI,0,!1);k.arc(f,g,l,0,.75*Math.PI,!1);k.lineTo(f,g);k.closePath();k.fill();k.fillStyle="white";k.strokeStyle="black";k.beginPath();k.arc(f+l/3,g-l/3,l/4,0,2*Math.PI,!1);k.closePath();k.fill();k.stroke();k.fillStyle="black";k.beginPath();k.arc(f+4*l/9,g-l/3,l/8,0,2*Math.PI,!1);k.closePath();k.fill()},null);this.ShapeLibrary={enumerate:function(){return e},
version:"0.1"}}).call(this);
(function(r){if("undefined"===typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.canvas.labels");sigma.canvas.labels.def=function(e,d,a){var c=a("prefix")||"",b=e[c+"size"];if(!(b<a("labelThreshold"))&&"string"===typeof e.label){var f="fixed"===a("labelSize")?a("defaultLabelSize"):a("labelSizeRatio")*b;d.font=(a("fontStyle")?a("fontStyle")+" ":"")+f+"px "+a("font");d.fillStyle="node"===a("labelColor")?e.color||a("defaultNodeColor"):a("defaultLabelColor");a=(e.angle||a("angle")||0)/180*
Math.PI;f=Math.round(e[c+"x"]+(b+3)*Math.cos(a));c=Math.round(e[c+"y"]+(b+3)*Math.sin(a));d.save();d.translate(f,c);d.rotate(a);d.fillText(e.label,0,0);d.restore()}}}).call(this);
(function(){sigma.utils.pkg("sigma.canvas.nodes");sigma.canvas.nodes.def=function(r,e,d,a){var c=a||{},b=d("prefix")||"";a=r[b+"size"]||1;var f=r[b+"x"];b=r[b+"y"];var g=d("defaultNodeColor"),l=d("imgCrossOrigin")||"anonymous",h=r.border_size||d("borderSize"),k=d("outerBorderSize"),n=c.color||r.color||g;c="default"===d("nodeBorderColor")?d("defaultNodeBorderColor"):c.borderColor||r.border_color||g;var m=r.active?d("nodeActiveLevel"):r.level;sigma.utils.canvas.setLevel(m,e);r.active&&(n="node"===d("nodeActiveColor")?
r.active_color||n:d("defaultNodeActiveColor")||n,0<k&&(e.beginPath(),e.fillStyle="node"===d("nodeOuterBorderColor")?n||g:d("defaultNodeOuterBorderColor"),e.arc(f,b,a+h+k,0,2*Math.PI,!0),e.closePath(),e.fill()),0<h&&(e.beginPath(),e.fillStyle="node"===d("nodeBorderColor")?c:d("defaultNodeBorderColor"),e.arc(f,b,a+h,0,2*Math.PI,!0),e.closePath(),e.fill()));r.borderColor&&(e.lineWidth=2,e.strokeStyle=r.borderColor,e.stroke());if(void 0!==r.pie){if(0<Object.keys(r.pie).length){k=0;for(var p in r.pie)k+=
r.pie[p];h=g=0;for(p in r.pie)e.fillStyle=r.colorArray[g],e.beginPath(),e.moveTo(f,b),e.arc(f,b,a,h,h+2*Math.PI*r.pie[p]/k,!1),e.lineTo(f,b),e.closePath(),e.fill(),h+=2*Math.PI*r.pie[p]/k,g++;sigma.utils.canvas.resetLevel(e)}}else if((!r.active||r.active&&"node"===d("nodeActiveColor"))&&r.colors&&r.colors.length){k=r.colors.length;g=1/k;for(p=h=0;p<k;p++)e.fillStyle=r.colors[p],e.beginPath(),e.moveTo(f,b),e.arc(f,b,a,h,h+2*Math.PI*g,!1),e.lineTo(f,b),e.closePath(),e.fill(),h+=2*Math.PI*g;sigma.utils.canvas.resetLevel(e)}else e.fillStyle=
n,e.beginPath(),e.arc(f,b,a,0,2*Math.PI,!0),e.closePath(),e.fill(),sigma.utils.canvas.resetLevel(e),!r.active&&0<h&&a>2*h&&(e.beginPath(),e.strokeStyle=c,e.lineWidth=h,e.arc(f,b,a,0,2*Math.PI,!0),e.closePath(),e.stroke());r.image&&sigma.utils.canvas.drawImage(r,f,b,a,e,l,d("imageThreshold"));r.icon&&sigma.utils.canvas.drawIcon(r,f,b,a,e,d("iconThreshold"))}})();
(function(r){if("undefined"===typeof sigma)throw"sigma.renderers.snapshot: sigma not in scope.";var e=this.URL||this.webkitURL||this;sigma.prototype.toSVG=function(d){d=d||{};var a=this.settings("classPrefix"),c=d.size||d.width||"1000",b=d.size||d.height||"1000",f=d.background,g=document.createElement("div");g.setAttribute("width",c);g.setAttribute("height",b);g.setAttribute("style","position:absolute; top: 0px; left:0px; width: "+c+"px; height: "+b+"px;");var l=this.addCamera(),h=this.addRenderer({camera:l,
container:g,type:"svg",forceLabels:!!d.labels,drawEdgeLabels:!0});h.resize(c,b);this.refresh();this.killRenderer(h);this.killCamera(l);g=g.querySelector("svg");g.removeAttribute("style");g.setAttribute("width",c+"px");g.setAttribute("height",b+"px");g.setAttribute("x","0px");g.setAttribute("y","0px");g.setAttribute("style","overflow:hidden; background-color:"+f);c=g.querySelectorAll('[id="'+a+'-group-edges"] > [class="'+a+'-edge"]');g.querySelectorAll('[id="'+a+'-group-labels"] > [class="'+a+'-label"]');
this.settings("labelThreshold");for(b=0;b<c.length;b++)f=c[b],"target"===f.getAttribute("type")?f.getAttribute("r"):f.getAttribute("width");c=g.querySelector('[id="'+a+'-group-hovers"]');g.removeChild(c);d.classes=!1!==d.classes;if(!d.data||d.classes){c=d;var k={};b={};f=0;h="";var n;if(c.classes){var m=document.createElementNS("http://www.w3.org/2000/svg","style");g.insertBefore(m,g.firstChild)}var p=g.querySelectorAll('[id="'+a+'-group-nodes"] > [class="'+a+'-node"]');var q=0;var t=p.length;for(n=
!0;q<t;q++)l=p[q].getAttribute("fill"),c.data||p[q].removeAttribute("data-node-id"),c.classes&&p[q].pie!==r&&(l in k||(k[l]=n?a+"-node":"c-"+f++,h+="."+k[l]+"{fill: "+l+"}"),k[l]!==a+"-node"&&p[q].setAttribute("class",p[q].getAttribute("class")+" "+k[l]),p[q].removeAttribute("fill")),n=!1;k=g.querySelectorAll('[id="'+a+'-group-edges"] > [class="'+a+'-edge"]');q=0;t=k.length;for(n=!0;q<t;q++)l=k[q].getAttribute("stroke"),c.data||k[q].removeAttribute("data-edge-id"),c.classes&&(l in b||(b[l]=n?a+"-edge":
"c-"+f++,h+="."+b[l]+"{stroke: "+l+"}"),b[l]!==a+"-edge"&&k[q].setAttribute("class",k[q].getAttribute("class")+" "+b[l]),k[q].removeAttribute("stroke")),n=!1;c.classes&&m.appendChild(document.createTextNode(h))}a='<?xml version="1.0" encoding="utf-8"?>\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n'+g.outerHTML;d.download&&(g=d.filename||"graph.svg",d=new Blob([a],{type:"image/svg+xml;charset=utf-8"}),m={},m.anchor=document.createElement("a"),
m.anchor.setAttribute("href",e.createObjectURL(d)),m.anchor.setAttribute("download",g),g=document.createEvent("MouseEvent"),g.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),e.revokeObjectURL(d),m.anchor.dispatchEvent(g),delete m.anchor);return a}}).call(this);
(function(r){if("undefined"===typeof sigma)throw Error("sigma is not declared");var e=Object.create(null);sigma.classes.graph.attach("addNode","sigma.helpers.graph.addNode",function(d){d.fixed&&(e[d.id]=this.nodesIndex[d.id])});sigma.classes.graph.attachBefore("dropNode","sigma.helpers.graph.dropNode",function(d){delete e[d]});sigma.classes.graph.attachBefore("clear","sigma.helpers.graph.clear",function(){for(var d in e)"hasOwnProperty"in e&&!e.hasOwnProperty(d)||delete e[d];e=Object.create(null)});
sigma.classes.graph.hasMethod("fixNode")||sigma.classes.graph.addMethod("fixNode",function(d){this.nodesIndex[d]&&(this.nodesIndex[d].fixed=!0,e[d]=this.nodesIndex[d]);return this});sigma.classes.graph.hasMethod("unfixNode")||sigma.classes.graph.addMethod("unfixNode",function(d){this.nodesIndex[d]&&(delete this.nodesIndex[d].fixed,delete e[d]);return this});sigma.classes.graph.hasMethod("getFixedNodes")||sigma.classes.graph.addMethod("getFixedNodes",function(){var d,a=[];for(d in e)a.push(this.nodesIndex[d]);
return a});sigma.classes.graph.hasMethod("dropNodes")||sigma.classes.graph.addMethod("dropNodes",function(d){if(1<arguments.length)throw Error("Too many arguments. Use an array instead.");if("string"===typeof d||"number"===typeof d)this.dropNode(d);else if(Array.isArray(d)){var a;var c=0;for(a=d.length;c<a;c++)if("string"===typeof d[c]||"number"===typeof d[c])this.dropNode(d[c]);else throw new TypeError("Invalid argument: a node id is not a string or a number, was "+d[c]);}else throw new TypeError('Invalid argument: "v" is not a string, a number, or an array, was '+
d);return this});sigma.classes.graph.hasMethod("dropEdges")||sigma.classes.graph.addMethod("dropEdges",function(d){if(1<arguments.length)throw Error("Too many arguments. Use an array instead.");if("string"===typeof d||"number"===typeof d)this.dropEdge(d);else if(Array.isArray(d)){var a;var c=0;for(a=d.length;c<a;c++)if("string"===typeof d[c]||"number"===typeof d[c])this.dropEdge(d[c]);else throw new TypeError("Invalid argument: an edge id is not a string or a number, was "+d[c]);}else throw new TypeError("Invalid argument: it is not a string, a number, or an array, was "+
d);return this});sigma.classes.graph.hasMethod("adjacentNodes")||sigma.classes.graph.addMethod("adjacentNodes",function(d,a){a=a||{};a.withHidden=2==arguments.length?a.withHidden:!0;if("string"!==typeof d&&"number"!==typeof d)throw new TypeError("The node id is not a string or a number, was "+d);var c=this,b,f,g=[];for(b in this.allNeighborsIndex[d])a.withHidden?g.push(this.nodesIndex[b]):this.nodes(b).hidden||(f=0!=Object.keys(this.allNeighborsIndex[d][b]).map(function(l){return c.edges(l)}).filter(function(l){return!l.hidden}).length)&&
g.push(this.nodesIndex[b]);return g});sigma.classes.graph.hasMethod("adjacentEdges")||sigma.classes.graph.addMethod("adjacentEdges",function(d,a){a=a||{};a.withHidden=2==arguments.length?a.withHidden:!0;if("string"!==typeof d&&"number"!==typeof d)throw new TypeError("The node id is not a string or a number, was "+d);var c=this.allNeighborsIndex[d],b,f,g=[];for(f in c)for(b in c[f])!a.withHidden&&this.edges(b).hidden||g.push(c[f][b]);return g})}).call(this);
(function(r){function e(){f=Object.create(null);g=Object.create(null);h=l=0}function d(){null!==b&&n&&b.dispatchEvent("activeNodes")}function a(){null!==b&&n&&b.dispatchEvent("activeEdges")}function c(m){b=this;k=m.graph;null===f&&(f=Object.create(null),l=0,k.nodes().forEach(function(p){p.active&&(f[p.id]=p,l++)}));null===g&&(g=Object.create(null),h=0,k.edges().forEach(function(p){p.active&&(g[p.id]=p,h++)}));sigma.classes.dispatcher.extend(this);m.bind("kill",function(){b.kill()})}if("undefined"===
typeof sigma)throw Error("sigma is not declared");sigma.utils.pkg("sigma.plugins");var b=null,f,g,l,h,k=null,n=!0;e();sigma.classes.graph.attach("addNode","sigma.plugins.activeState.addNode",function(m){m.active&&(f[m.id]=this.nodesIndex[m.id],l++,d())});sigma.classes.graph.attach("addEdge","sigma.plugins.activeState.addEdge",function(m){m.active&&(g[m.id]=this.edgesIndex[m.id],a())});sigma.classes.graph.attachBefore("dropNode","sigma.plugins.activeState.dropNode",function(m){this.nodesIndex[m]!==
r&&this.nodesIndex[m].active&&(delete f[m],l--,d())});sigma.classes.graph.attachBefore("dropEdge","sigma.plugins.activeState.dropEdge",function(m){this.edgesIndex[m]!==r&&this.edgesIndex[m].active&&(delete g[m],h--,a())});sigma.classes.graph.attachBefore("clear","sigma.plugins.activeState.clear",e);c.prototype.kill=function(){this.unbind();g=f=null;h=l=0;b=k=null};c.prototype.addNodes=function(m){var p=l;arguments.length||k.nodes().forEach(function(u){u.hidden||(u.active=!0,f[u.id]=u)});if(1<arguments.length)throw new TypeError("Too many arguments. Use an array instead.");
if("string"===typeof m||"number"===typeof m){var q=k.nodes(m);q.hidden||(q.active=!0,f[m]=q)}else if(Array.isArray(m)){var t;var x=0;for(t=m.length;x<t;x++)if("string"===typeof m[x]||"number"===typeof m[x])q=k.nodes(m[x]),q.hidden||(q.active=!0,f[m[x]]=q);else throw new TypeError("Invalid argument: a node id is not a string or a number, was "+m[x]);}l=Object.keys(f).length;p!=l&&d();return this};c.prototype.addEdges=function(m){var p=h;arguments.length||k.edges().forEach(function(u){u.hidden||(u.active=
!0,g[u.id]=u)});if(1<arguments.length)throw new TypeError("Too many arguments. Use an array instead.");if("string"===typeof m||"number"===typeof m){var q=k.edges(m);q.hidden||(q.active=!0,g[m]=q)}else if(Array.isArray(m)){var t;var x=0;for(t=m.length;x<t;x++)if("string"===typeof m[x]||"number"===typeof m[x])q=k.edges(m[x]),q.hidden||(q.active=!0,g[m[x]]=q);else throw new TypeError("Invalid argument: an edge id is not a string or a number, was "+m[x]);}h=Object.keys(g).length;p!=h&&a();return this};
c.prototype.dropNodes=function(m){var p=l;arguments.length||k.nodes().forEach(function(x){x.active=!1;delete f[x.id]});if(1<arguments.length)throw new TypeError("Too many arguments. Use an array instead.");if("string"===typeof m||"number"===typeof m)k.nodes(m).active=!1,delete f[m];else if(Array.isArray(m)){var q;var t=0;for(q=m.length;t<q;t++)if("string"===typeof m[t]||"number"===typeof m[t])k.nodes(m[t]).active=!1,delete f[m[t]];else throw new TypeError("Invalid argument: a node id is not a string or a number, was "+
m[t]);}l=Object.keys(f).length;p!=l&&d();return this};c.prototype.dropEdges=function(m){var p=h;arguments.length||k.edges().forEach(function(x){x.active=!1;delete g[x.id]});if(1<arguments.length)throw new TypeError("Too many arguments. Use an array instead.");if("string"===typeof m||"number"===typeof m)k.edges(m).active=!1,delete g[m];else if(Array.isArray(m)){var q;var t=0;for(q=m.length;t<q;t++)if("string"===typeof m[t]||"number"===typeof m[t])k.edges(m[t]).active=!1,delete g[m[t]];else throw new TypeError("Invalid argument: an edge id is not a string or a number, was "+
m[t]);}h=Object.keys(g).length;p!=h&&a();return this};c.prototype.addNeighbors=function(){if(!("adjacentNodes"in k))throw Error("Missing method graph.adjacentNodes");var m;var p=Object.keys(f);if(p.length){for(m in f)k.adjacentNodes(m).forEach(function(q){q.hidden||p.push(q.id)});n=!1;this.dropNodes().dropEdges();n=!0;this.addNodes(p)}return this};c.prototype.setNodesBy=function(m){var p=[];k.nodes().forEach(function(q){m.call(k,q)&&(q.hidden||p.push(q.id))});n=!1;this.dropNodes();n=!0;this.addNodes(p);
return this};c.prototype.setEdgesBy=function(m){var p=[];k.edges().forEach(function(q){m.call(k,q)&&(q.hidden||p.push(q.id))});n=!1;this.dropEdges();n=!0;this.addEdges(p);return this};c.prototype.invertNodes=function(){var m=k.nodes().filter(function(p){return!p.hidden&&!p.active}).map(function(p){return p.id});n=!1;this.dropNodes();n=!0;m.length?this.addNodes(m):d();return this};c.prototype.invertEdges=function(){var m=k.edges().filter(function(p){return!p.hidden&&!p.active}).map(function(p){return p.id});
n=!1;this.dropEdges();n=!0;m.length?this.addEdges(m):a();return this};c.prototype.nodes=function(){var m,p=[];for(m in f)p.push(f[m]);return p};c.prototype.edges=function(){var m,p=[];for(m in g)p.push(g[m]);return p};sigma.plugins.activeState=function(m){b||(b=new c(m));return b};sigma.plugins.killActiveState=function(){b instanceof c&&(b.kill(),b=null)}}).call(this);
(function(){function r(a){if(d[a])return d[a];var c=[0,0,0];a.match(/^#/)?(a=(a||"").replace(/^#/,""),c=3===a.length?[parseInt(a.charAt(0)+a.charAt(0),16),parseInt(a.charAt(1)+a.charAt(1),16),parseInt(a.charAt(2)+a.charAt(2),16)]:[parseInt(a.charAt(0)+a.charAt(1),16),parseInt(a.charAt(2)+a.charAt(3),16),parseInt(a.charAt(4)+a.charAt(5),16)]):a.match(/^ *rgba? *\(/)&&(a=a.match(/^ *rgba? *\( *([0-9]*) *, *([0-9]*) *, *([0-9]*) *(,.*)?\) *$/),c=[+a[1],+a[2],+a[3]]);d[a]={r:c[0],g:c[1],b:c[2]};return d[a]}
if("undefined"===typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.plugins");var e=0,d={};sigma.plugins.animate=function(a,c,b){function f(){var t=(sigma.utils.dateNow()-n)/h;if(1<=t){m.forEach(function(z){for(var D in c)D in c&&(z[D]=z[c[D]])});var x;for(x in a.cameras){var u=a.cameras[x];u.edgequadtree._enabled=!0}a.refresh();if("function"===typeof g.onComplete)g.onComplete()}else t=k(t),m.forEach(function(z){for(var D in c)if(D in c)if(D.match(/color$/)){var E=D;var G=p[z.id][D];
var H=z[c[D]],F=t;G=r(G);H=r(H);G="rgb("+[G.r*(1-F)+H.r*F|0,G.g*(1-F)+H.g*F|0,G.b*(1-F)+H.b*F|0].join()+")";z[E]=G}else z[D]=z[c[D]]*t+p[z.id][D]*(1-t)}),a.refresh(),a.animations[l]=requestAnimationFrame(f)}var g=b||{},l=++e,h=g.duration||a.settings("animationsTime"),k="string"===typeof g.easing?sigma.utils.easings[g.easing]:"function"===typeof g.easing?g.easing:sigma.utils.easings.quadraticInOut,n=sigma.utils.dateNow();var m=g.nodes&&g.nodes.length?"object"===typeof g.nodes[0]?g.nodes:a.graph.nodes(g.nodes):
a.graph.nodes();var p=m.reduce(function(t,x){var u;t[x.id]={};for(u in c)u in x&&(t[x.id][u]=x[u]);return t},{});a.animations=a.animations||Object.create({});sigma.plugins.kill(a);for(var q in a.cameras)b=a.cameras[q],b.edgequadtree._enabled=!1;f()};sigma.plugins.kill=function(a){for(var c in a.animations||{})cancelAnimationFrame(a.animations[c]);for(c in a.cameras){var b=a.cameras[c];b.edgequadtree._enabled=!0}}}).call(window);
(function(){function r(d,a,c){function b(w){var y=window.getComputedStyle(w);return{left:w.getBoundingClientRect().left+(parseInt(y.getPropertyValue("padding-left").replace("px",""))||0),top:w.getBoundingClientRect().top+(parseInt(y.getPropertyValue("padding-top").replace("px",""))||0)}}function f(w){0!=w.data.enter.nodes.length&&(w=w.data.enter.nodes[0],G[w.id]||(E.push(w),G[w.id]=!0,H||(z=E[E.length-1],x.addEventListener("mousedown",l))))}function g(w){if(0!=w.data.leave.nodes.length){w=w.data.leave.nodes[0];
var y=E.map(function(v){return v}).indexOf(w);E.splice(y,1);delete G[w.id];E.length&&!H?z=E[E.length-1]:x.removeEventListener("mousedown",l)}}function l(w){I&&3!=w.which&&(H=!0,z&&0<m.graph.nodes().length&&(J=!0,x.removeEventListener("mousedown",l),q.addEventListener("mousemove",k),q.addEventListener("mouseup",h),t.settings({mouseEnabled:!1,enableHovering:!1}),n.dispatchEvent("startdrag",{node:z,captor:w,renderer:t})))}function h(w){H=!1;x.addEventListener("mousedown",l);q.removeEventListener("mousemove",
k);q.removeEventListener("mouseup",h);t.settings({mouseEnabled:!0,enableHovering:!0});if(F){n.dispatchEvent("drop",{node:z,captor:w,renderer:t});if(p)for(var y=p.nodes(),v=0;v<y.length;v++)delete y[v].alphaX,delete y[v].alphaY;m.refresh()}n.dispatchEvent("dragend",{node:z,captor:w,renderer:t});F=!1;z=null}function k(w){(function(){var y=b(t.container),v=w.clientX-y.left;y=w.clientY-y.top;var B=Math.cos(t.camera.angle),A=Math.sin(t.camera.angle),K=m.graph.nodes(),L=[],M;if(I&&!(2>K.length)){var C=
sigma.utils.getDistance(v,y,z[u+"x"],z[u+"y"]);if(!(J&&C<z[u+"size"])){J=!1;for(C=0;I;C++){if(M=K[C])M={x:M.x*B+M.y*A,y:M.y*B-M.x*A,renX:M[u+"x"],renY:M[u+"y"]},L.push(M);if(C==K.length-1)break;if(0<C)if(L[0].x==L[1].x||L[0].y==L[1].y)L.pop();else break}C=L[0];L=L[1];K=L.renX-C.renX;0===K&&(K=1);M=L.renY-C.renY;0===M&&(M=1);v=(v-C.renX)/K*(L.x-C.x)+C.x;y=(y-C.renY)/M*(L.y-C.y)+C.y;L=v*B-y*A;B=y*B+v*A;if(p&&(A=p.nodes(),C=-1<A.map(function(N){return N.id}).indexOf(z.id)))for(C=0;C<A.length;C++)D!=
z&&(A[C].alphaX=null,A[C].alphaY=null),A[C].alphaX&&A[C].alphaY||(A[C].alphaX=A[C].x-v,A[C].alphaY=A[C].y-y),A[C].x=z.x+A[C].alphaX,A[C].y=z.y+A[C].alphaY;z.x=L;z.y=B;m.refresh({skipIndexation:!0});F=!0;n.dispatchEvent("drag",{node:z,captor:w,renderer:t});D=z}}})()}sigma.classes.dispatcher.extend(this);if(sigma.renderers.webgl&&a instanceof sigma.renderers.webgl)throw Error("The sigma.plugins.dragNodes is not compatible with the WebGL renderer");var n=this,m=d,p=c,q=document.body,t=a,x=a.container.lastChild,
u=a.options.prefix,z=null,D=null,E=[],G={},H=!1,F=!1,J=!0,I=!0;a instanceof sigma.renderers.svg&&(x=a.container.firstChild);a.bind("hovers",f);a.bind("hovers",g);a.bind("click",function(w){H=!1;q.removeEventListener("mousemove",k);q.removeEventListener("mouseup",h);E.length?setTimeout(function(){z=E[E.length-1];x.addEventListener("mousedown",l)},0):z=null});this.enable=function(){I=!0};this.disable=function(){I=!1;D=z=null;E=[];G={};F=H=!1;J=!0};this.unbindAll=function(){x.removeEventListener("mousedown",
l);q.removeEventListener("mousemove",k);q.removeEventListener("mouseup",h);t.unbind("hovers",f);t.unbind("hovers",g)}}if("undefined"===typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.plugins");var e={};sigma.plugins.dragNodes=function(d,a,c){e[d.id]||(e[d.id]=new r(d,a,c));d.bind("kill",function(){sigma.plugins.killDragNodes(d)});d.bind("animate.start",function(){e[d.id].disable()});d.bind("animate.end",function(){e[d.id].enable()});return e[d.id]};sigma.plugins.killDragNodes=function(d){e[d.id]instanceof
r&&(e[d.id].unbindAll(),delete e[d.id])}}).call(window);
(function(r){function e(c,b,f){function g(h){var k=Math.max(c.settings("zoomMin"),Math.min(c.settings("zoomMax"),c.camera.ratio*(h.ratio||1)));sigma.misc.animation.camera(c.camera,{x:c.camera.x+(h.x||0),y:c.camera.y+(h.y||0),ratio:k},{duration:h.duration})}f=sigma.utils.extend(f,d);f.zoomingRatio=f.zoomingRatio||c.settings("zoomingRatio");f.duration=f.duration||c.settings("mouseZoomDuration");this.domElt=b.container;this.keys={};this.currentEvents=null;var l=this;sigma.classes.dispatcher.extend(this);
this.keyDown=function(h){9===h.which||18===h.which||20===h.which||l.keys[h.which]||(l.keys[h.which]=!0,l.currentEvents=Object.keys(l.keys).join("+"),l.dispatchEvent(l.currentEvents))};this.keyUp=function(h){delete l.keys[h.which];l.currentEvents=null};this.focus=function(h){l.domElt.focus();return!0};this.blur=function(h){l.domElt.blur();l.keys={};l.currentEvents=null;return!0};this.domElt.tabIndex=f.tabIndex;f.autofocus&&(this.domElt.focus(),this.domElt.addEventListener("mouseover",this.focus,!1),
this.domElt.addEventListener("mouseout",this.blur,!1));this.domElt.addEventListener("keydown",this.keyDown,!1);this.domElt.addEventListener("keyup",this.keyUp,!1);this.bind("37 18+37",function(){g({x:-f.displacement,duration:f.duration})});this.bind("38 18+38",function(){g({y:-f.displacement,duration:f.duration})});this.bind("39 18+39",function(){g({x:f.displacement,duration:f.duration})});this.bind("40 18+40",function(){g({y:f.displacement,duration:f.duration})});this.bind("32+38 18+32+38",function(){g({ratio:1/
f.zoomingRatio,duration:f.duration})});this.bind("32+40 18+32+40",function(){g({ratio:f.zoomingRatio,duration:f.duration})})}if("undefined"===typeof sigma)throw"sigma.plugins.keyboard: sigma is not declared";sigma.utils.pkg("sigma.plugins");var d={displacement:100,duration:200,zoomingRatio:1.7,autofocus:!0,tabIndex:-1},a={};sigma.plugins.keyboard=function(c,b,f){a[c.id]||(a[c.id]=new e(c,b,f),c.bind("kill",function(){sigma.plugins.killKeyboard(c)}));return a[c.id]};sigma.plugins.killKeyboard=function(c){a[c.id]instanceof
e&&(a[c.id].unbind(),a[c.id].domElt.removeEventListener("mouseover",a[c.id].focus,!1),a[c.id].domElt.removeEventListener("mouseout",a[c.id].blur,!1),a[c.id].domElt.removeEventListener("keydown",a[c.id].keyDown,!1),a[c.id].domElt.removeEventListener("keyup",a[c.id].keyUp,!1),a[c.id].domElt=null,a[c.id].keys={},a[c.id].currentEvents=null,delete a[c.id])}}).call(this);
(function(r){function e(h,k,n){sigma.classes.dispatcher.extend(this);if(sigma.renderers.webgl&&k instanceof sigma.renderers.webgl)throw Error("The sigma.plugins.lasso is not compatible with the WebGL renderer");this.sigmaInstance=h;this.renderer=k;this.drawingContext=this.drawingCanvas=r;this.drewPoints=[];this.selectedNodes=[];this.isDrawing=this.isActive=!1;b=document.body;this.settings=new sigma.classes.configurable({strokeStyle:"black",lineWidth:2,fillWhileDrawing:!1,fillStyle:"rgba(200, 200, 200, 0.25)",
cursor:"crosshair"},n||{})}function d(h){var k=this.drawingCanvas.getBoundingClientRect();this.isActive&&(this.isDrawing=!0,this.drewPoints=[],this.selectedNodes=[],this.sigmaInstance.refresh(),this.drewPoints.push({x:h.clientX-k.left,y:h.clientY-k.top}),this.drawingCanvas.style.cursor=this.settings("cursor"),h.stopPropagation())}function a(h){if(this.isActive&&this.isDrawing){var k=this.drawingCanvas.getBoundingClientRect();switch(h.type){case "touchmove":var n=h.touches[0].clientX;var m=h.touches[0].clientY;
break;default:n=h.clientX,m=h.clientY}this.drewPoints.push({x:n-k.left,y:m-k.top});this.drawingContext.lineWidth=this.settings("lineWidth");this.drawingContext.strokeStyle=this.settings("strokeStyle");this.drawingContext.fillStyle=this.settings("fillStyle");this.drawingContext.lineJoin="round";this.drawingContext.lineCap="round";this.drawingContext.clearRect(0,0,this.drawingContext.canvas.width,this.drawingContext.canvas.height);n=this.drewPoints[0];m=this.drewPoints[1];k=this.drewPoints.length;this.drawingContext.beginPath();
this.drawingContext.moveTo(n.x,n.y);for(var p=1;p<k;p++)this.drawingContext.quadraticCurveTo(n.x,n.y,n.x+(m.x-n.x)/2,n.y+(m.y-n.y)/2),n=this.drewPoints[p],m=this.drewPoints[p+1];this.drawingContext.lineTo(n.x,n.y);this.drawingContext.stroke();this.settings("fillWhileDrawing")&&this.drawingContext.fill();h.stopPropagation()}}function c(h){if(this.isActive&&this.isDrawing){this.isDrawing=!1;for(var k=this.renderer.nodesOnScreen,n=k.length,m=this.renderer.options.prefix||"";n--;){var p=k[n];this.drawingContext.isPointInPath(p[m+
"x"],p[m+"y"])&&!p.hidden&&this.selectedNodes.push(p)}this.dispatchEvent("selectedNodes",this.selectedNodes);this.drawingContext.clearRect(0,0,this.drawingCanvas.width,this.drawingCanvas.height);this.drawingCanvas.style.cursor=this.settings("cursor");h.stopPropagation()}}if("undefined"===typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.plugins");var b=r,f={};e.prototype.clear=function(){this.deactivate();this.renderer=this.sigmaInstance=r;return this};e.prototype.activate=function(){this.sigmaInstance&&
!this.isActive&&(this.isActive=!0,this.renderer.domElements.lasso||(this.renderer.initDOM("canvas","lasso"),this.drawingCanvas=this.renderer.domElements.lasso,this.drawingCanvas.width=this.renderer.container.offsetWidth,this.drawingCanvas.height=this.renderer.container.offsetHeight,this.renderer.container.appendChild(this.drawingCanvas),this.drawingContext=this.drawingCanvas.getContext("2d"),this.drawingCanvas.style.cursor=this.settings("cursor")),g.apply(this));return this};e.prototype.deactivate=
function(){this.sigmaInstance&&this.isActive&&(this.isDrawing=this.isActive=!1,l.apply(this),this.renderer.domElements.lasso&&(this.renderer.container.removeChild(this.renderer.domElements.lasso),delete this.renderer.domElements.lasso,this.drawingCanvas.style.cursor="",this.drawingContext=this.drawingCanvas=r,this.drewPoints=[]));return this};var g=function(){this.drawingCanvas.addEventListener("mousedown",d.bind(this));b.addEventListener("mousemove",a.bind(this));b.addEventListener("mouseup",c.bind(this));
this.drawingCanvas.addEventListener("touchstart",d.bind(this));b.addEventListener("touchmove",a.bind(this));b.addEventListener("touchcancel",c.bind(this));b.addEventListener("touchleave",c.bind(this));b.addEventListener("touchend",c.bind(this))},l=function(){this.drawingCanvas.removeEventListener("mousedown",d.bind(this));b.removeEventListener("mousemove",a.bind(this));b.removeEventListener("mouseup",c.bind(this));this.drawingCanvas.removeEventListener("touchstart",d.bind(this));this.drawingCanvas.removeEventListener("touchmove",
a.bind(this));b.removeEventListener("touchcancel",c.bind(this));b.removeEventListener("touchleave",c.bind(this));b.removeEventListener("touchend",c.bind(this))};e.prototype.getSelectedNodes=function(){return this.selectedNodes};sigma.plugins.lasso=function(h,k,n){f[h.id]||(f[h.id]=new e(h,k,n));h.bind("kill",function(){f[h.id]instanceof e&&(f[h.id].clear(),delete f[h.id])});return f[h.id]}}).call(this);
(function(r){function e(k,n){var m=k?k.length:0;if(!m)return[];var p=-1,q=[],t=n.length;a:for(;++p<m;){var x=k[p];if(x===x){for(var u=t;u--;)if(n[u]===x)continue a;q.push(x)}else 0>n.indexOf(x)&&q.push(x)}return q}function d(k){l=32===k.which;f.removeEventListener("keydown",d,!1);f.addEventListener("keyup",a,!1)}function a(k){l=!1;f.addEventListener("keydown",d,!1);f.removeEventListener("keyup",a,!1)}function c(k,n,m){function p(){n.dropEdges();n.nodes().length===k.graph.nodes().length?n.dropNodes():
n.addNodes();k.refresh({skipIndexation:!0})}function q(){I++}function t(){I=0;J.container.lastChild.addEventListener("mousemove",q)}function x(){setTimeout(function(){I=0;var v=n.nodes()[0];v&&null===g&&(g=v.id)},1);J.container.lastChild.removeEventListener("mousemove",q)}function u(){n.dropEdges();n.dropNodes();k.refresh({skipIndexation:!0})}function z(){var v=n.nodes().map(function(A){return A.id}),B=n.edges().map(function(A){return A.id});n.dropEdges(B);n.dropNodes(v);v.length==k.graph.nodes().length?
k.graph.clear():(k.graph.dropEdges(B),k.graph.dropNodes(v));k.refresh()}function D(){n.addNeighbors();k.refresh({skipIndexation:!0})}function E(){n.dropEdges();n.setNodesBy(function(v){return 0===k.graph.degree(v.id)});k.refresh({skipIndexation:!0})}function G(){n.dropEdges();n.setNodesBy(function(v){return 1===k.graph.adjacentNodes(v.id).length});k.refresh({skipIndexation:!0})}function H(v){v=v.data;v.length?(n.dropEdges(),n.addNodes(v.map(function(B){return B.id})),g=n.nodes()[0].id):(n.dropNodes(),
g=null)}var F=this,J=m||k.renderers[0],I=0,w=null,y=null;f=f||document.getElementsByTagName("body")[0];J.container.lastChild.addEventListener("mousedown",t);J.container.lastChild.addEventListener("mouseup",x);this.init=function(){var v=n.nodes();v.length&&(g=v[0].id)};this.clickNodesHandler=function(v){if(!(1<I)){var B=v.data.node.map(function(K){return K.id}),A=n.nodes().map(function(K){return K.id});v=e(B,A);n.dropEdges();l?(B=e(B,v),n.dropNodes(B)):(1<A.length&&n.addNodes(B),B=n.nodes()[0],null!=
B&&(g===B.id?v.length?(n.dropNodes(),g=null):setTimeout(function(){h||(n.dropNodes(),g=null,k.refresh({skipIndexation:!0}))},k.settings("doubleClickTimeout")):g=B.id));n.addNodes(v);k.refresh({skipIndexation:!0})}};this.doubleClickNodesHandler=function(v){h=!0;setTimeout(function(){h=!1},100+k.settings("doubleClickTimeout"))};this.clickEdgesHandler=function(v){if(!(1<I)){var B=v.data.edge.map(function(K){return K.id}),A=n.edges().map(function(K){return K.id});v=e(B,A);n.dropNodes();l?(B=e(B,v),n.dropEdges(B)):
(n.dropEdges(),1<A.length&&n.addEdges(B));n.addEdges(v);k.refresh({skipIndexation:!0})}};k.bind("clickNodes",this.clickNodesHandler);k.bind("doubleClickNodes",this.doubleClickNodesHandler);k.bind("clickEdges",this.clickEdgesHandler);f.addEventListener("keydown",d,!1);this.bindKeyboard=function(v){if(!v)throw Error('Missing argument: "keyboard"');w=v;w.bind("32+65 18+32+65",p);w.bind("32+85 18+32+85",u);w.bind("32+46 18+32+46",z);w.bind("32+69 18+32+69",D);w.bind("32+73 18+32+73",E);w.bind("32+76 18+32+76",
G);return this};this.unbindKeyboard=function(){w&&(w.unbind("32+65 18+32+65",p),w.unbind("32+85 18+32+85",u),w.unbind("32+46 18+32+46",z),w.unbind("32+69 18+32+69",D),w.unbind("32+73 18+32+73",E),w.unbind("32+76 18+32+76",G),w=null);return this};this.bindLasso=function(v){if(!v)throw Error('Missing argument: "lassoInstance"');y=v;y.bind("selectedNodes",H)};this.unbindLasso=function(){y&&y.unbind("selectedNodes",H)};this.clear=function(){k.unbind("clickNodes",F.clickNodesHandler);k.unbind("doubleClickNodes",
F.doubleClickNodesHandler);k.unbind("clickEdges",F.clickEdgesHandler);F.unbindKeyboard();F.unbindLasso();J.container.lastChild.removeEventListener("mousedown",t);J.container.lastChild.removeEventListener("mouseup",x);J.container.lastChild.removeEventListener("mousemove",q);w=J=null}}if("undefined"===typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.plugins");var b={},f=null,g=null,l=!1,h=!1;sigma.plugins.select=function(k,n,m){b[k.id]||(b[k.id]=new c(k,n),k.bind("kill",function(){sigma.plugins.killSelect(k)}));
return b[k.id]};sigma.plugins.killSelect=function(k){b[k.id]instanceof c&&(b[k.id].clear(),delete b[k.id]);!b.length&&f&&(f.removeEventListener("keydown",d,!1),f.removeEventListener("keyup",a,!1),f=null)}}).call(this);
(function(r){if("undefined"===typeof sigma)throw"sigma is not declared";if("undefined"===typeof ShapeLibrary)throw"ShapeLibrary is not declared";sigma.utils.pkg("sigma.canvas.nodes");var e=r,d={},a=function(b,f,g,l,h){if(e&&b.image&&b.image.url){var k=b.image.url,n=b.image.h||1,m=b.image.w||1,p=b.image.scale||1;b=b.image.clip||1;var q=d[k];q||(q=document.createElement("IMG"),q.src=k,q.onload=function(){console.log("redraw on image load");e.refresh()},d[k]=q);k=m<n?m/n:1;n=n<m?n/m:1;p*=l;h.save();
h.beginPath();h.arc(f,g,l*b,0,2*Math.PI,!0);h.closePath();h.clip();h.drawImage(q,f+Math.sin(-.7855)*p*k,g-Math.cos(-.7855)*p*n,p*k*2*Math.sin(-.7855)*-1,p*n*2*Math.cos(-.7855));h.restore()}},c=function(b,f,g){sigma.canvas.nodes[b]=function(l,h,k){var n=k("prefix")||"",m=l[n+"size"];k=l.color||k("defaultNodeColor");var p=l.borderColor||k,q=l[n+"x"];n=l[n+"y"];h.save();f&&f(l,q,n,m,k,h);g&&g(l,q,n,m,p,h);a(l,q,n,m,h);h.restore()}};ShapeLibrary.enumerate().forEach(function(b){c(b.name,b.drawShape,b.drawBorder)});
this.CustomShapes={init:function(b){e=b},version:"0.1"}}).call(this);
(function(r){function e(){var b=this;this.init=function(f,g){g=g||{};this.sigInst=f;this.config=sigma.utils.extend(g,d);this.easing=g.easing;this.duration=g.duration;g.nodes&&(this.nodes=g.nodes,delete g.nodes);if(!sigma.plugins||"undefined"===typeof sigma.plugins.animate)throw Error("sigma.plugins.animate is not declared");this.running=!1};this.atomicGo=function(){if(!this.running||1>this.iterCount)return!1;var f=this.nodes||this.sigInst.graph.nodes(),g=f.length,l,h=Infinity,k=-Infinity,n=Infinity,
m=-Infinity,p,q,t,x;this.iterCount--;this.running=!1;for(l=0;l<g;l++){var u=f[l];u.dn.dx=0;u.dn.dy=0;h=Math.min(h,u.dn_x-(u.dn_size*b.config.scaleNodes+b.config.nodeMargin));k=Math.max(k,u.dn_x+(u.dn_size*b.config.scaleNodes+b.config.nodeMargin));n=Math.min(n,u.dn_y-(u.dn_size*b.config.scaleNodes+b.config.nodeMargin));m=Math.max(m,u.dn_y+(u.dn_size*b.config.scaleNodes+b.config.nodeMargin))}var z=k-h;var D=m-n;k=(h+k)/2;m=(n+m)/2;h=k-b.config.permittedExpansion*z/2;k+=b.config.permittedExpansion*z/
2;n=m-b.config.permittedExpansion*D/2;m+=b.config.permittedExpansion*D/2;var E={};for(p=0;p<b.config.gridSize;p++)for(E[p]={},q=0;q<b.config.gridSize;q++)E[p][q]=[];for(l=0;l<g;l++){u=f[l];var G=u.dn_x-(u.dn_size*b.config.scaleNodes+b.config.nodeMargin);var H=u.dn_x+(u.dn_size*b.config.scaleNodes+b.config.nodeMargin);var F=u.dn_y-(u.dn_size*b.config.scaleNodes+b.config.nodeMargin);var J=u.dn_y+(u.dn_size*b.config.scaleNodes+b.config.nodeMargin);G=Math.floor(b.config.gridSize*(G-h)/(k-h));H=Math.floor(b.config.gridSize*
(H-h)/(k-h));F=Math.floor(b.config.gridSize*(F-n)/(m-n));J=Math.floor(b.config.gridSize*(J-n)/(m-n));for(q=G;q<=H;q++)for(p=F;p<=J;p++)E[p][q].push(u.id)}var I={};for(p=0;p<b.config.gridSize;p++)for(q=0;q<b.config.gridSize;q++)E[p][q].forEach(function(y){I[y]||(I[y]=[]);for(t=Math.max(0,p-1);t<=Math.min(p+1,b.config.gridSize-1);t++)for(x=Math.max(0,q-1);x<=Math.min(q+1,b.config.gridSize-1);x++)E[t][x].forEach(function(v){v!==y&&-1===I[y].indexOf(v)&&I[y].push(v)})});for(l=0;l<g;l++){var w=f[l];I[w.id].forEach(function(y){y=
b.sigInst.graph.nodes(y);var v=y.dn_x-w.dn_x,B=y.dn_y-w.dn_y,A=Math.sqrt(v*v+B*B);A<w.dn_size*b.config.scaleNodes+b.config.nodeMargin+(y.dn_size*b.config.scaleNodes+b.config.nodeMargin)&&(b.running=!0,0<A?w.adjustY?y.dn.dy+=B/A*(1+w.dn_size):w.fixed||(y.dn.dx+=v/A*(1+w.dn_size),y.dn.dy+=B/A*(1+w.dn_size)):w.adjustY?y.dn.dy+=.01*D*(.5-Math.random()):w.fixed||(y.dn.dx+=.01*z*(.5-Math.random()),y.dn.dy+=.01*D*(.5-Math.random())))})}for(l=0;l<g;l++)u=f[l],u.adjustY?u.dn_y+=.1*u.dn.dy*b.config.speed:u.fixed||
(u.dn_x+=.1*u.dn.dx*b.config.speed,u.dn_y+=.1*u.dn.dy*b.config.speed);this.running&&1>this.iterCount&&(this.running=!1);return this.running};this.go=function(){for(this.iterCount=this.config.maxIterations;this.running;)this.atomicGo();this.stop()};this.start=function(){if(!this.running){var f=this.sigInst.graph.nodes(),g=this.sigInst.renderers[b.config.rendererIndex].options.prefix;this.running=!0;for(var l=0;l<f.length;l++)f[l].dn_x=f[l][g+"x"],f[l].dn_y=f[l][g+"y"],f[l].dn_size=f[l][g+"size"],f[l].dn=
{dx:0,dy:0};c[b.sigInst.id].dispatchEvent("start");this.go()}};this.stop=function(){var f=this.sigInst.graph.nodes();this.running=!1;if(this.easing)c[b.sigInst.id].dispatchEvent("interpolate"),sigma.plugins.animate(b.sigInst,{x:"dn_x",y:"dn_y"},{easing:b.easing,onComplete:function(){b.sigInst.refresh();for(var l=0;l<f.length;l++)f[l].dn=null,f[l].dn_x=null,f[l].dn_y=null;c[b.sigInst.id].dispatchEvent("stop")},duration:b.duration});else{for(var g=0;g<f.length;g++)f[g].x=f[g].dn_x,f[g].y=f[g].dn_y;
this.sigInst.refresh();for(g=0;g<f.length;g++)f[g].dn=null,f[g].dn_x=null,f[g].dn_y=null;c[b.sigInst.id].dispatchEvent("stop")}};this.kill=function(){this.easing=this.config=this.sigInst=null}}if("undefined"===typeof sigma)throw Error("sigma is not declared");sigma.utils.pkg("sigma.layout.noverlap");var d={speed:3,scaleNodes:1.2,nodeMargin:5,gridSize:20,permittedExpansion:1.1,rendererIndex:0,maxIterations:500},a={},c={};sigma.prototype.configNoverlap=function(b){var f=this;if(!b)throw Error('Missing argument: "config"');
a[f.id]||(a[f.id]=new e,c[f.id]={},sigma.classes.dispatcher.extend(c[f.id]),f.bind("kill",function(){a[f.id].kill();a[f.id]=null;c[f.id]=null}));a[f.id].init(f,b);return c[f.id]};sigma.prototype.startNoverlap=function(b){b&&this.configNoverlap(this,b);a[this.id].start();return c[this.id]};sigma.prototype.isNoverlapRunning=function(){return!!a[this.id]&&a[this.id].running}}).call(this);